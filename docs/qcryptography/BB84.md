The BB84 quantum key distribution (QKD) protocol allows two parties (Alice and Bob) to establish a shared secret key securely using quantum mechanics. Let's break down the content of the image step by step to understand the basics:

1. **Key Strings**:
   - Alice starts with **two binary strings**, \( a \) and \( b \), each of length \( n \). These strings are random.
   - The string \( a \) determines the **bit values** (0 or 1) Alice wants to send.
   - The string \( b \) determines the **basis** (how the bits will be encoded) for each qubit.

2. **Encoding Qubits**:
   - Alice encodes her bits (\( a_i \)) and bases (\( b_i \)) into quantum states. For each bit, she prepares a qubit \( |\psi_{a_i b_i}\), where:
     - \( a_i \) is the \( i \)-th bit of \( a \) (0 or 1).
     - \( b_i \) is the \( i \)-th bit of \( b \) (0 or 1).

3. **Quantum States**:
   - Based on \( a_i \) and \( b_i \), Alice uses the following encoding:
     - \( |\psi_{00}\): \( |0\rangle \) — A qubit in the **Z-basis** representing 0.
     - \( |\psi_{10}\): \( |1\rangle \) — A qubit in the **Z-basis** representing 1.
     - \( |\psi_{01}\): \( |+\rangle = \frac{1}{\sqrt{2}}(|0\rangle + |1\rangle) \) — A qubit in the **X-basis** representing 0.
     - \( |\psi_{11}\): \( |-\rangle = \frac{1}{\sqrt{2}}(|0\rangle - |1\rangle) \) — A qubit in the **X-basis** representing 1.

   - The Z-basis (rectilinear basis) consists of \( |0\rangle \) and \( |1\rangle \).
   - The X-basis (diagonal basis) consists of \( |+\rangle \) and \( |-\rangle \).

4. **Tensor Product**:
   - Alice prepares a sequence of \( n \) qubits, each encoded using the tensor product formula:
     \[
     |\psi\rangle = \bigotimes_{i=1}^n |\psi_{a_i b_i}\rangle
     \]
     This means she sends a combined quantum state of all \( n \) qubits, where each qubit is independently encoded.

5. **Purpose**:
   - Bob measures each qubit in a randomly chosen basis (Z-basis or X-basis).
   - If Bob's measurement basis matches Alice's encoding basis (\( b_i \)), the measurement result will match \( a_i \) perfectly.
   - If the bases don’t match, Bob's measurement result will be random and provide no useful information.

6. **Key Extraction**:
   - After sending and measuring, Alice and Bob compare their bases (\( b \)) over a public channel.
   - They discard the results where their bases don’t match, leaving a shorter string of bits that they use as the secret key.

The security of BB84 relies on the principles of quantum mechanics:
- Any attempt by an eavesdropper (Eve) to intercept or measure the qubits introduces detectable disturbances in the system.
- This ensures the integrity of the communication between Alice and Bob.


Great question! The reason I didn't initially consider \( a_1 = 0 \) or \( b_2 = 0 \) is because the example explicitly set \( a = 10 \) and \( b = 01 \). However, you're absolutely correct that we could (and should) consider **all possible cases** of \( a_i \) and \( b_i \) when \( n = 2 \), to explore the full set of scenarios.

Let’s now revisit the problem and explicitly calculate the tensor product for **all combinations** of \( a_1, a_2 \) and \( b_1, b_2 \), instead of just one specific example.

---

### **All Possible Cases for \( n = 2 \): General Expansion**
For \( n = 2 \), we have two bits \( **a = a_1a_2** \) and \( **b = b_1b_2** \). Each qubit state \( |\psi_{a_i b_i}\rangle \) is determined as follows:

1. **If \( b_i = 0 \)** (Z-basis):
   - \( a_i = 0 \): \( |\psi_{a_i b_i}\rangle = |0\rangle \)
   - \( a_i = 1 \): \( |\psi_{a_i b_i}\rangle = |1\rangle \)

2. **If \( b_i = 1 \)** (X-basis):
   - \( a_i = 0 \): \( |\psi_{a_i b_i}\rangle = |+\rangle = \frac{1}{\sqrt{2}}(|0\rangle + |1\rangle) \)
   - \( a_i = 1 \): \( |\psi_{a_i b_i}\rangle = |-\rangle = \frac{1}{\sqrt{2}}(|0\rangle - |1\rangle) \)

---

### **Explicit Calculation of Tensor Products**
We calculate the tensor product for **one full combination** as an example, but the method applies to all cases.

#### Example: \( a = 00, b = 00 \)
- \( a_1 = 0, b_1 = 0 \): \( |\psi_{a_1 b_1}\rangle = |0\rangle \)
- \( a_2 = 0, b_2 = 0 \): \( |\psi_{a_2 b_2}\rangle = |0\rangle \)

The total state:
\[
|\psi\rangle = |\psi_{a_1 b_1}\rangle \otimes |\psi_{a_2 b_2}\rangle = |0\rangle \otimes |0\rangle = |00\rangle
\]

---

#### Example: \( a = 01, b = 01 \)
- \( a_1 = 0, b_1 = 0 \): \( |\psi_{a_1 b_1}\rangle = |0\rangle \)
- \( a_2 = 1, b_2 = 1 \): \( |\psi_{a_2 b_2}\rangle = |-\rangle = \frac{1}{\sqrt{2}}(|0\rangle - |1\rangle) \)

The total state:
\[
|\psi\rangle = |0\rangle \otimes \frac{1}{\sqrt{2}}(|0\rangle - |1\rangle)
\]
Expand the tensor product:
\[
|\psi\rangle = \frac{1}{\sqrt{2}}(|00\rangle - |01\rangle)
\]

---

#### Example: \( a = 10, b = 10 \)
- \( a_1 = 1, b_1 = 1 \): \( |\psi_{a_1 b_1}\rangle = |-\rangle = \frac{1}{\sqrt{2}}(|0\rangle - |1\rangle) \)
- \( a_2 = 0, b_2 = 0 \): \( |\psi_{a_2 b_2}\rangle = |0\rangle \)

The total state:
\[
|\psi\rangle = \frac{1}{\sqrt{2}}(|0\rangle - |1\rangle) \otimes |0\rangle
\]
Expand the tensor product:
\[
|\psi\rangle = \frac{1}{\sqrt{2}}(|00\rangle - |10\rangle)
\]

---

### **General Formula**
For \( n = 2 \), the state \( |\psi\rangle \) is given by:
\[
|\psi\rangle = |\psi_{a_1 b_1}\rangle \otimes |\psi_{a_2 b_2}\rangle
\]
where each \( |\psi_{a_i b_i}\rangle \) depends on the values of \( a_i \) and \( b_i \) as:
- \( b_i = 0 \): \( |\psi_{a_i b_i}\rangle = |a_i\rangle \) (Z-basis).
- \( b_i = 1 \): \( |\psi_{a_i b_i}\rangle = \frac{1}{\sqrt{2}}(|0\rangle + (-1)^{a_i}|1\rangle) \) (X-basis).

# Base shifting
## **What is Basis Shifting?**
**Basis shifting** refers to changing the representation or measurement basis of a quantum state. In quantum mechanics, qubits are often represented and measured in different bases. The two most commonly used bases are:

1. **Z-basis (Computational Basis):**
    - States: ($\lvert 0\rangle$, $\lvert 1\rangle$).
    - This is the "classical" binary basis used for encoding and measuring.

2. **X-basis (Diagonal Basis):**
    - $\lvert - \rangle = \frac{\lvert 0 \rangle - \lvert 1 \rangle}{\sqrt{2}}$ 
    - $\lvert + \rangle = \frac{\lvert 0 \rangle + \lvert 1 \rangle}{\sqrt{2}}$
    - This basis involves superpositions of the Z-basis states.

**Basis shifting** occurs when:

1. {==A quantum state encoded in one basis is measured in another basis.==}
2. A qubit is deliberately transformed from one basis to another using quantum gates (like the Hadamard gate).

---

## **How Does Basis Shifting Happen?**
In the BB84 protocol, basis shifting happens due to the **random choice of encoding and measurement bases** by Alice and Bob:

1. **Alice’s Encoding**:
   - Alice randomly encodes each qubit in either the Z-basis or X-basis:
     - \( b_i = 0 \): Z-basis (\( |0\rangle, |1\rangle \)).
     - \( b_i = 1 \): X-basis (\( |+\rangle, |-\rangle \)).
   - Example: If \( a_i = 1, b_i = 0 \), she encodes \( |1\rangle \). If \( a_i = 1, b_i = 1 \), she encodes \( |-\rangle \).

2. **Bob’s Measurement**:
   - Bob randomly chooses to measure each qubit in either the Z-basis or X-basis.
   - If Bob’s measurement basis matches Alice’s encoding basis, the result is correct.
   - If Bob’s measurement basis doesn’t match, the result is **random**.

---

## **Detecting Eavesdropping with Basis Shifting**
The BB84 protocol uses basis shifting to detect the presence of an eavesdropper (Eve). Here’s how it works:

1. **Eve’s Interception**:
   - Eve tries to intercept and measure the qubits in transit from Alice to Bob.
   - Since Eve doesn’t know Alice’s encoding basis, she must randomly choose a measurement basis (Z or X) for each qubit.

2. **Eve’s Disturbance**:
   - If Eve measures in the wrong basis (e.g., measures a qubit encoded in the X-basis using the Z-basis), her measurement collapses the quantum state.
   - When the qubit is sent to Bob, it no longer matches Alice’s original encoding.

3. **Key Verification**:
   - After Bob measures the qubits, Alice and Bob publicly compare the bases they used (but not the actual measurement results).
   - They discard any qubits where their bases didn’t match.
   - For the remaining qubits (where their bases matched), they compare a subset of their measurement results over a public channel.

4. **Error Detection**:
   - If there’s no eavesdropping, Bob’s measurements will match Alice’s encoding perfectly (no errors).
   - If Eve intercepted the qubits, her random measurements will introduce detectable errors in the shared key.

---

## **Example of Eavesdropping Detection**
Let’s consider an example where \( n = 3 \):

### Without Eavesdropping:
1. **Alice’s Encoding**:
   - Alice sends: \( |0\rangle \), \( |+\rangle \), \( |1\rangle \) (bases: Z, X, Z).
2. **Bob’s Measurement**:
   - Bob measures in the same bases: Z, X, Z.
   - Results: Bob gets the correct key: \( 0, 0, 1 \).

### With Eavesdropping:
1. **Eve’s Interception**:
   - Eve intercepts and randomly measures the qubits in bases: X, Z, X.
   - She collapses the qubits into new states: \( |+\rangle, |1\rangle, |+\rangle \).
2. **Bob’s Measurement**:
   - Bob measures in bases: Z, X, Z.
   - Results: Errors occur because Eve altered the quantum states.

### Detection:
- Alice and Bob compare the results of a subset of their key bits where their bases matched.
- If Eve intercepted, the error rate will be higher than expected, signaling eavesdropping.

---

## **Key Takeaways**
- **Why Basis Shifting Works for Security**:
  - Quantum states collapse when measured in the wrong basis.
  - This collapse introduces detectable errors if an eavesdropper tries to intercept.

- **How Alice and Bob Detect Eavesdropping**:
  - They use random basis shifting (Z-basis and X-basis) to encode and measure.
  - Any tampering causes mismatches in their measurement results.


## Isn't Bob and Eve face the same challenge: they don't knew the encoding basis Alice used?
